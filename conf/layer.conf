# We have a conf and classes directory, add to BBPATH
BBPATH .= ":${LAYERDIR}"

# We have recipes-* directories, add to BBFILES
BBFILES += "${LAYERDIR}/recipes-*/*/*.bb \
            ${LAYERDIR}/recipes-*/*/*.bbappend \
            ${LAYERDIR}/recipes-*/*/*/*.bb \
            ${LAYERDIR}/recipes-*/*/*/*.bbappend "

BBFILE_COLLECTIONS += "ics_dm"
BBFILE_PATTERN_ics_dm = "^${LAYERDIR}/"
BBFILE_PRIORITY_ics_dm = "10"

LAYERDEPENDS_ics_dm = "elbb meta-iotedge swupdate virtualization-layer"
LAYERSERIES_COMPAT_ics_dm = "dunfell"

CORE_IMAGE_EXTRA_INSTALL_append = " ics-dm-iot-hub-device-update"

PREFERRED_PROVIDER_virtual/docker ?= "docker-moby"
