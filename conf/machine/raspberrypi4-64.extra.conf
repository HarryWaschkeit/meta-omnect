require conf/machine/include/rpi.inc

# adu compatibility id
OMNECT_ADU_DEVICEPROPERTIES_COMPATIBILITY_ID = "2"

# wic: how to partition
WKS_FILE = "omnect-os.rpi4.wks.in"

# u-boot boot cmd config vars
UBOOT_ARCH = "arm64"

OMNECT_WAIT_ONLINE_INTERFACES_BUILD = "eth0:${OMNECT_WLAN0}"

# no differentiation for now between release an devel images concerning rootfs
# size
OMNECT_PART_SIZE_ROOTFS ?= "${@bb.utils.contains('OMNECT_RELEASE_IMAGE', '1', '760832', '760832', d)}"

# definitions to embed bootloader version in binary
OMNECT_BOOTLOADER_EMBEDDED_VERSION_BBTARGET  = "virtual/bootloader"
OMNECT_BOOTLOADER_EMBEDDED_VERSION_BBFILE    = "u-boot.bin"
OMNECT_BOOTLOADER_EMBEDDED_VERSION_TYPE      = "file"
OMNECT_BOOTLOADER_EMBEDDED_VERSION_PARAMSIZE ?= "256"

IMAGE_BOOT_FILES:remove:omnect_uboot = "u-boot.bin;kernel8.img"
IMAGE_BOOT_FILES:append:omnect_uboot = " bootloader.versioned.bin;kernel8.img"
